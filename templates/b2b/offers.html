<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>CatÃ¡logo B2B - O11CE</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { --bg:#f8fafc; --card:#ffffff; --muted:#64748b; --text:#1e293b; --accent:#3b82f6; --border:#e2e8f0; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto}
    header{padding:16px 20px;border-bottom:1px solid var(--border);background:white}
    h1{margin:0;font-size:18px} nav{margin-top:8px}
    nav a{margin-right:16px;color:var(--accent);text-decoration:none}
    main{padding:20px;max-width:1100px;margin:0 auto}
    .card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:16px;margin-bottom:12px}
    .product{display:flex;justify-content:space-between;align-items:center}
    .product-info h3{margin:0 0 4px 0;font-size:16px}
    .product-info p{margin:0;color:var(--muted);font-size:13px}
    .price{font-weight:600;color:var(--accent)}
    button{background:var(--accent);color:white;border:none;border-radius:6px;padding:8px 16px;cursor:pointer}
    .loading{text-align:center;padding:40px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <h1>ðŸ›’ CatÃ¡logo B2B â€” O11CE</h1>
    <nav>
      <a href="/b2b/">CatÃ¡logo</a>
      <a href="/b2b/cart/">Carrito</a>
      <a href="/panel/">Panel</a>
    </nav>
  </header>
  <main>
    <div id="offers" class="loading">Cargando productos...</div>
  </main>
  <script>
    const API_BASE = '/api/v1';
    
    async function loadProducts() {
      try {
        const response = await fetch(`${API_BASE}/catalog/products`);
        const data = await response.json();
        renderProducts(data.results || data);
      } catch (error) {
        document.getElementById('offers').innerHTML = '<p>Error al cargar productos</p>';
        console.error('Error:', error);
      }
    }
    
    function renderProducts(products) {
      const container = document.getElementById('offers');
      if (!products || products.length === 0) {
        container.innerHTML = '<p>No hay productos disponibles</p>';
        return;
      }
      
      container.innerHTML = products.map(product => `
        <div class="card">
          <div class="product">
            <div class="product-info">
              <h3>${product.name}</h3>
              <p>${product.code} â€¢ ${product.brand || 'Sin marca'} â€¢ ${product.category || 'General'}</p>
            </div>
            <div>
              <div class="price">$${product.price}</div>
              <button onclick="addToCart('${product.code}')">Agregar</button>
            </div>
          </div>
        </div>
      `).join('');
    }
    
    function addToCart(productCode) {
      // TODO: Implementar lÃ³gica de carrito
      alert(`Producto ${productCode} agregado al carrito`);
    }
    
    // Cargar productos al iniciar
    loadProducts();
  </script>
</body>
</html>
