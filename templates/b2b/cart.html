<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Carrito B2B - O11CE</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { --bg:#f8fafc; --card:#ffffff; --muted:#64748b; --text:#1e293b; --accent:#3b82f6; --border:#e2e8f0; --success:#10b981; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto}
    header{padding:16px 20px;border-bottom:1px solid var(--border);background:white}
    h1{margin:0;font-size:18px} nav{margin-top:8px}
    nav a{margin-right:16px;color:var(--accent);text-decoration:none}
    main{padding:20px;max-width:800px;margin:0 auto}
    .card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:16px;margin-bottom:12px}
    .cart-item{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--border)}
    .cart-item:last-child{border-bottom:none}
    .item-info h4{margin:0 0 4px 0;font-size:15px}
    .item-info p{margin:0;color:var(--muted);font-size:13px}
    .quantity{display:flex;align-items:center;gap:8px}
    .quantity button{background:var(--border);color:var(--text);border:none;border-radius:4px;width:28px;height:28px;cursor:pointer}
    .quantity input{width:60px;text-align:center;border:1px solid var(--border);border-radius:4px;padding:4px}
    .price{font-weight:600;color:var(--accent)}
    .summary{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:20px;margin-top:20px}
    .summary-row{display:flex;justify-content:space-between;margin-bottom:8px}
    .summary-row.total{font-weight:600;font-size:16px;border-top:1px solid var(--border);padding-top:8px}
    .checkout-btn{background:var(--success);color:white;border:none;border-radius:6px;padding:12px 24px;font-size:16px;cursor:pointer;width:100%;margin-top:16px}
    .empty-cart{text-align:center;padding:40px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <h1>üõí Carrito B2B ‚Äî O11CE</h1>
    <nav>
      <a href="/b2b/">Cat√°logo</a>
      <a href="/b2b/cart/">Carrito</a>
      <a href="/panel/">Panel</a>
    </nav>
  </header>
  <main>
    <div class="card">
      <h2>Productos en el carrito</h2>
      <div id="cart-items" class="empty-cart">Tu carrito est√° vac√≠o</div>
    </div>
    
    <div id="cart-summary" class="summary" style="display:none">
      <div class="summary-row">
        <span>Subtotal:</span>
        <span id="subtotal">$0.00</span>
      </div>
      <div class="summary-row">
        <span>IVA (21%):</span>
        <span id="tax">$0.00</span>
      </div>
      <div class="summary-row total">
        <span>Total:</span>
        <span id="total">$0.00</span>
      </div>
      <button class="checkout-btn" onclick="goToCheckout()">Proceder al Checkout</button>
    </div>
  </main>
  <script>
    // Simulaci√≥n de carrito (en producci√≥n ser√≠a localStorage o API)
    let cart = [
      { code: 'CHOC001', name: 'Chocolate Amargo 70% Cacao', price: 850.00, quantity: 2 },
      { code: 'GALL002', name: 'Galletas Dulces Surtidas', price: 420.00, quantity: 1 }
    ];
    
    function renderCart() {
      const container = document.getElementById('cart-items');
      const summary = document.getElementById('cart-summary');
      
      if (cart.length === 0) {
        container.innerHTML = '<div class="empty-cart">Tu carrito est√° vac√≠o</div>';
        summary.style.display = 'none';
        return;
      }
      
      container.innerHTML = cart.map((item, index) => `
        <div class="cart-item">
          <div class="item-info">
            <h4>${item.name}</h4>
            <p>${item.code}</p>
          </div>
          <div class="quantity">
            <button onclick="updateQuantity(${index}, -1)">-</button>
            <input type="number" value="${item.quantity}" min="1" onchange="setQuantity(${index}, this.value)">
            <button onclick="updateQuantity(${index}, 1)">+</button>
          </div>
          <div class="price">$${(item.price * item.quantity).toFixed(2)}</div>
          <button onclick="removeItem(${index})" style="background:#ef4444;color:white;border:none;border-radius:4px;padding:4px 8px;cursor:pointer">√ó</button>
        </div>
      `).join('');
      
      updateSummary();
      summary.style.display = 'block';
    }
    
    function updateQuantity(index, change) {
      cart[index].quantity = Math.max(1, cart[index].quantity + change);
      renderCart();
    }
    
    function setQuantity(index, value) {
      cart[index].quantity = Math.max(1, parseInt(value) || 1);
      renderCart();
    }
    
    function removeItem(index) {
      cart.splice(index, 1);
      renderCart();
    }
    
    function updateSummary() {
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const tax = subtotal * 0.21;
      const total = subtotal + tax;
      
      document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
      document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
      document.getElementById('total').textContent = `$${total.toFixed(2)}`;
    }
    
    function goToCheckout() {
      window.location.href = '/b2b/checkout/';
    }
    
    // Cargar carrito al iniciar
    renderCart();
  </script>
</body>
</html>
